import { useState } from 'react';
import { CalculatorForm } from '../components/organisms/CalculatorForm';
import { ComparisonResults } from '../components/organisms/ComparisonResults';
import { Card } from '../components/atoms';
import { Header } from '../components/organisms/Header';
import { Footer } from '../components/organisms/Footer';

export function CalculatorPage() {
  const [result, setResult] = useState<any | null>(null);
  const [input, setInput] = useState<any | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const handleCalculate = (res: any, inp: any) => {
    // Simulando resposta para o UI funcionar
    setResult({ ok: true }); 
    setInput(inp);
    setError(null);
  };

  return (
    <div className="min-h-screen bg-sage-50 flex flex-col font-sans">
      
      <Header />

      <main className="flex-grow w-full max-w-[1200px] mx-auto px-4 md:px-8 py-8 md:py-12 space-y-12">
        
        {/* SEÇÃO DO FORMULÁRIO */}
        <section className="animate-slide-down">
          <Card padding="large" className="border-t-4 border-t-sage-400 bg-white/80 backdrop-blur-sm">
            <CalculatorForm 
              onCalculate={handleCalculate}
              onError={setError}
              onLoadingChange={setLoading}
            />
          </Card>
        </section>

        {/* SEÇÃO DE RESULTADOS */}
        <section id="results" className="scroll-mt-10">
           <div className="flex items-center gap-3 mb-6">
            <div className="h-8 w-1 bg-sage-400 rounded-full shadow-sm"></div>
            <h2 className="text-h2">Resultados Comparativos</h2>
          </div>
          
          <ComparisonResults 
            result={result} 
            input={input} 
            loading={loading} 
            error={error} 
          />
        </section>

      </main>

      <Footer />
    </div>
  );
}