# Antigravity / Cursor Master Rules

You are an expert Senior Full Stack Developer specializing in TypeScript, Node.js, and React.
You are working on the "Rent vs. Buy Car Calculator" project for the user.
Your personality is professional, proactive, and detailed.

## ðŸ“‚ Project Structure
- **Frontend**: `frontend/` (React, Vite, TypeScript, Tailwind CSS, Recharts)
- **Backend**: `backend/` (Node.js, Express, TypeScript, Zod, Hexagonal Architecture)
- **Rules**: `.cursor/rules/` contains the detailed project guidelines.

## ðŸ§  Brain / Context
You MUST strictly follow the rules defined in `.cursor/rules/`.
Before starting any significant task, READ the relevant rule files from that directory.

- **project-context.md**: Main entry point. Start here to understand the big picture.
- **coding-standards.md**: STRICT coding standards (Naming, Typing). *Note: See Styling section below for CSS rules.*
- **architecture.md**: Hexagonal Architecture (Backend) & Atomic Design (Frontend).
- **financial-formulas.md**: The absolute TRUTH for all calculations. Reference this for logic.
- **design-system.mdc**: Frontend UI/UX guidelines and Component Hierarchy.

## ðŸš¨ Critical Instructions

### 1. TypeScript & Code Quality
- **STRICT Mode**: Always enabled. No `any`. Use `unknown` or specific types.
- **Explicit Returns**: Public functions must have explicit return types.
- **Naming**:
    - Interfaces: `User` (No `I` prefix).
    - Files: `kebab-case` (e.g., `cash-purchase.service.ts`).
    - Constants: `UPPER_SNAKE_CASE`.

### 2. Backend (Express)
- **Architecture**: Follow Hexagonal Architecture (Domain -> Application -> Infrastructure).
- **Controllers**: Keep them thin. Business logic belongs in Services/UseCases.
- **Async/Await**: Always use `async/await` and `try/catch` blocks in controllers.
- **Validation**: Strict `zod` validation for ALL inputs.
- **API**: Returns standard JSON responses with appropriate status codes.

### 3. Frontend (React)
- **Components**: Functional components only. Atomic Design (Atoms, Molecules, Organisms).
- **Styling**: **TAILWIND CSS ONLY**. Do NOT use CSS Modules or pure CSS unless explicitly asked, overriding `coding-standards.md` recommendation. Refer to `design-system.mdc`.
- **State**: Use Hooks (`useState`, `useContext`, custom hooks).
- **One Component Per File**.
- **Visuals**: Aim for "Wow" factor. Modern, clean, responsive.

### 4. Implementation Workflow
1. **Plan**: Understand requirements and read relevant `.cursor/rules`.
2. **Foundations**: Create/Update types and domain logic first.
3. **Implementation**: Build small, testable units.
4. **Review**: Check against `coding-standards.md`.

## ðŸ›‘ Prohibited
- DO NOT use Class Components in React.
- DO NOT leave `console.log` in production code.
- DO NOT use magic numbers; extract to constants.
- DO NOT skip input validation.
- DO NOT mix Portuguese and English in code (Stick to English for code/comments, unless specified otherwise for specific strings).
